//tealium universal tag - utag.35 ut4.0.202110220729, Copyright 2021 Tealium.com Inc. All Rights Reserved.
var _uxa=_uxa||[];try{(function(id,loader){var u={};utag.o[loader].sender[id]=u;if(utag.ut===undefined){utag.ut={};}
if(utag.ut.loader===undefined){u.loader=function(o){var b,c,l,a=document;if(o.type==="iframe"){b=a.createElement("iframe");o.attrs=o.attrs||{"height":"1","width":"1","style":"display:none"};for(l in utag.loader.GV(o.attrs)){b.setAttribute(l,o.attrs[l]);}b.setAttribute("src",o.src);}else if(o.type=="img"){utag.DB("Attach img: "+o.src);b=new Image();b.src=o.src;return;}else{b=a.createElement("script");b.language="javascript";b.type="text/javascript";b.async=1;b.charset="utf-8";for(l in utag.loader.GV(o.attrs)){b[l]=o.attrs[l];}b.src=o.src;}if(o.id){b.id=o.id};if(typeof o.cb=="function"){if(b.addEventListener){b.addEventListener("load",function(){o.cb()},false);}else{b.onreadystatechange=function(){if(this.readyState=='complete'||this.readyState=='loaded'){this.onreadystatechange=null;o.cb()}};}}l=o.loc||"head";c=a.getElementsByTagName(l)[0];if(c){utag.DB("Attach to "+l+": "+o.src);if(l=="script"){c.parentNode.insertBefore(b,c);}else{c.appendChild(b)}}}}else{u.loader=utag.ut.loader;}
if(utag.ut.typeOf===undefined){u.typeOf=function(e){return({}).toString.call(e).match(/\s([a-zA-Z]+)/)[1].toLowerCase();};}else{u.typeOf=utag.ut.typeOf;}
u.ev={"view":1,"link":1};u.scriptrequested=false;u.map={"page_category_01":"custom.1.page_category_01","page_category_02":"custom.2.page_category_02","page_category_03":"custom.3.page_category_03","page_category_04":"custom.4.page_category_04","event_attributes_eventName":"custom.5.trackingEventName","cos":"custom.6.deviceSource","previous_platform":"custom.7.previousPlatform","user_profile_profileInfo_loginStatus":"custom.8.loginStatus","user_profile_profileInfo_profileID":"custom.9.profileID","user_profile_profileInfo_ctid":"custom.10.ctid","user_profile_accessMode":"custom.11.accessMode","conversion_funnel_stepNr":"custom.12.scid_stepNr"};u.extend=[function(a,b){try{if(b['event_attributes_eventName']=='add'){window._uxa=window._uxa||[];window._uxa.push(['trackPageEvent','addToCart']);}}catch(e){utag.DB(e)}}];u.send=function(a,b){if(u.ev[a]||u.ev.all!==undefined){utag.DB("send:35");utag.DB(b);var c,d,e,f,udh_collection=[];u.data={"base_url":"//t.contentsquare.net/uxa/##utag_id_project##.js","id_project":"877f6c2197add","custom":{},"path":"","product_id":[],"product_name":[],"product_sku":[],"product_category":[],"product_quantity":[],"product_unit_price":[],"send_udh_audiences":"false","send_udh_data":{}};for(c=0;c<u.extend.length;c++){try{d=u.extend[c](a,b);if(d==false)return}catch(e){if(typeof utag_err!='undefined'){utag_err.push({e:'extension error:'+e,s:utag.cfg.path+'utag.'+id+'.js',l:c,t:'ex'})}}};utag.DB("send:35:EXTENSIONS");utag.DB(b);c=[];for(d in utag.loader.GV(u.map)){if(b[d]!==undefined&&b[d]!==""){e=u.map[d].split(",");for(f=0;f<e.length;f++){if(e[f].indexOf("custom.")===0){u.data.custom[[e[f].substr(7)]]=b[d];}else if(e[f].indexOf("send_udh_data.")===0){u.data.send_udh_data[d]=e[f].split(".")[1];}else{u.data[e[f]]=b[d];}}}}
utag.DB("send:35:MAPPINGS");utag.DB(u.data);u.data.order_id=u.data.order_id||b._corder||"";u.data.order_total=u.data.order_total||b._ctotal||"";u.data.order_shipping=u.data.order_shipping||b._cship||"";u.data.order_tax=u.data.order_tax||b._ctax||"";if(u.data.product_id.length===0&&b._cprod!==undefined){u.data.product_id=b._cprod.slice(0);}
if(u.data.product_name.length===0&&b._cprodname!==undefined){u.data.product_name=b._cprodname.slice(0);}
if(u.data.product_sku.length===0&&b._csku!==undefined){u.data.product_sku=b._csku.slice(0);}
if(u.data.product_category.length===0&&b._ccat!==undefined){u.data.product_category=b._ccat.slice(0);}
if(u.data.product_quantity.length===0&&b._cquan!==undefined){u.data.product_quantity=b._cquan.slice(0);}
if(u.data.product_unit_price.length===0&&b._cprice!==undefined){u.data.product_unit_price=b._cprice.slice(0);}
u.data.base_url=u.data.base_url.replace("##utag_id_project##",u.data.id_project);u.data.path=u.data.path||location.pathname+location.hash.replace("#","?__");var custom,customVar;for(custom in u.data.custom){if(u.data.custom.hasOwnProperty(custom)&&custom!==""){customVar=custom.split(".");_uxa.push(["setCustomVariable",customVar[0],customVar[1],u.data.custom[custom],3]);}}
if(u.data.send_udh_audiences==="true"||u.data.send_udh_audiences===true){Object.keys(b).forEach(function(key){if(key.indexOf("va.audiences.")===0){_uxa.push(["trackDynamicVariable",{"key":"Tealium Audience "+key.substr(key.lastIndexOf("_")+1),"value":b[key]}]);}});}
Object.keys(u.data.send_udh_data).forEach(function(key){_uxa.push(["trackDynamicVariable",{"key":"Tealium Badge "+key.substr(key.lastIndexOf(".")+1),"value":u.data.send_udh_data[key]}]);});if(a==="view"){_uxa.push(["trackPageview",u.data.path]);}else{_uxa.push(["setPath",u.data.path]);}
if(u.data.order_id&&u.data.order_total){_uxa.push(["ecommerce:addTransaction",{"id":u.data.order_id,"revenue":u.data.order_total,"shipping":u.data.order_shipping,"tax":u.data.order_tax}]);for(f=0;f<u.data.product_id.length;f++){if(u.data.product_name[f]&&u.data.product_sku[f]&&!isNaN(parseFloat(u.data.product_unit_price[f]))&&!isNaN(parseFloat(u.data.product_quantity[f]))){_uxa.push(["ecommerce:addItem",{"id":u.data.order_id,"name":u.data.product_name[f],"sku":u.data.product_sku[f],"category":u.data.product_category[f],"price":u.data.product_unit_price[f],"quantity":u.data.product_quantity[f]}]);}else{utag.DB(u.id+" (ContentSquare): Item not tracked in transaction: Required attribute(s) not populated");}}
_uxa.push(["ecommerce:send"]);}else{utag.DB(u.id+" (ContentSquare): Transaction not tracked: Required attribute(s) not populated");}
if(!u.scriptrequested){u.scriptrequested=true;u.loader({"type":"script","src":u.data.base_url,"cb":null,"loc":"script","id":"utag_35"});}
utag.DB("send:35:COMPLETE");}};utag.o[loader].loader.LOAD(id);}("35","coop-ch.coop-ch"));}catch(error){utag.DB(error);}
